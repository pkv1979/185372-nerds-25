let feedback=document.querySelector(".feedback-button"),modal=document.querySelector(".modal"),close=modal.querySelector(".modal-close"),form=modal.querySelector("form"),name=form.querySelector("#name"),email=form.querySelector("#email"),message=form.querySelector("#message-text"),isStorageEnabled=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageEnabled=!1}feedback.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),storageName?(name.value=storageName,storageEmail?(email.value=storageEmail,message.focus()):email.focus()):(name.focus(),storageEmail&&(email.value=storageEmail))}),close.addEventListener("click",function(e){e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.contains("modal-error")&&modal.classList.remove("modal-error"),name.classList.contains("invalid")&&name.classList.remove("invalid"),email.classList.contains("invalid")&&email.classList.remove("invalid"),message.classList.contains("invalid")&&message.classList.remove("invalid")}),form.addEventListener("submit",function(e){name.value&&email.value&&message.value?isStorageEnabled&&(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"),name.classList.remove("invalid"),email.classList.remove("invalid"),message.classList.remove("invalid"),name.value||name.classList.add("invalid"),email.value||email.classList.add("invalid"),message.value||message.classList.add("invalid"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modal.classList.contains("modal-show")&&(modal.classList.remove("modal-show"),modal.classList.contains("modal-error")&&modal.classList.remove("modal-error"),name.classList.contains("invalid")&&name.classList.remove("invalid"),email.classList.contains("invalid")&&email.classList.remove("invalid"),message.classList.contains("invalid")&&message.classList.remove("invalid")))});
